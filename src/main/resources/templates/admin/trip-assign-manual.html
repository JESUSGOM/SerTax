<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/layout :: layout(~{::title}, ~{::div.content-fragment})}">
<head>
    <title>Asignación Manual de Viaje</title>
    <style>
        .detail-grid { display: grid; grid-template-columns: 150px 1fr; gap: 5px 10px; }
        .detail-grid dt { font-weight: bold; }
    </style>
</head>
<body>
<div class="content-fragment">
    <h3>Detalles del Viaje a Asignar</h3>
    <dl class="detail-grid">
        <dt>ID Viaje:</dt>
        <dd th:text="${trip.tripId}"></dd>
        <dt>Usuario:</dt>
        <dd th:text="${trip.user.name} + ' (' + ${trip.user.phoneNumber} + ')'"></dd>
        <dt>Recogida:</dt>
        <dd th:text="${trip.pickupAddress}"></dd>
        <dt>Fecha Solicitud:</dt>
        <dd th:text="${#temporals.format(trip.requestTimestamp, 'dd/MM/yy HH:mm')}"></dd>
    </dl>

    <hr style="margin: 20px 0;">

    <h3>Asignar Conductor</h3>
    <form th:action="@{/admin/trips/assign}" method="post">
        <input type="hidden" name="tripId" th:value="${trip.tripId}" />

        <div style="margin-bottom: 15px;">
            <label for="driverId">Seleccione un conductor disponible:</label><br>
            <select id="driverId" name="driverId" required style="width: 300px; padding: 8px;">
                <option value="">-- Conductores de su asociación --</option>
                <option th:each="driver : ${drivers}"
                        th:value="${driver.driverId}"
                        th:text="${driver.name} + ' (' + ${driver.license.licenseNumber} + ')'">
                </option>
            </select>
        </div>

        <div>
            <button type="submit" style="padding: 10px 15px;">Asignar Taxi</button>
            <a th:href="@{/admin/dashboard}" style="padding: 10px 15px; text-decoration: none;">Cancelar</a>
        </div>
    </form>
</div>
</body>
</html>